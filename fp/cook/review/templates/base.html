{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}ì‚¬ì´íŠ¸ ì œëª©{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <div class="navbar">
        <div class="logo">
            <a href="{% url 'home' %}">
                <img src="{% static 'imgs/logo.png' %}" alt="í™ˆ">
            </a>
        </div>

        <div class="profile-container">
            {% if request.user.is_authenticated %}
                <img src="{% static 'imgs/cookie.png' %}" alt="ì¿ í‚¤ ì•„ì´ì½˜" class="cookie-icon" onclick="openModal()">
                {% if request.user.user_photo %}
                    <img src="{{ request.user.user_photo.url }}" alt="Profile" class="profile-img" onclick="toggleDropdown()">
                {% else %}
                    <img src="{% static 'imgs/user.png' %}" alt="Default Profile" class="profile-img" onclick="toggleDropdown()">
                {% endif %}
                <div id="profile-dropdown" class="dropdown-content">
                    <a href="{% url 'mypage' %}">MY PAGE</a>
                    <a href="{% url 'logout' %}">ë¡œê·¸ì•„ì›ƒ</a>
                </div>
            {% else %}
                <a href="{% url 'login' %}" class="auth-link">ë¡œê·¸ì¸</a>
                <a href="{% url 'signup' %}" class="auth-link">íšŒì›ê°€ì…</a>
            {% endif %}
        </div>
    </div>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2>ğŸª ì¿ í‚¤ ì•ˆë‚´</h2>
            <p>í˜„ì¬ ë³´ìœ  ì¤‘ì¸ ì¿ í‚¤: <strong>{{ request.user.points|default:'0' }}ê°œ</strong></p>
            <ul>
                <li>íšŒì›ê°€ì… ì‹œ <strong>200ê°œ</strong> ì œê³µ</li>
                <li>ë¦¬ë·° ì‘ì„± ì‹œ <strong>10ê°œ</strong> ì œê³µ</li>
                <li>ì‚¬ì§„ ì²¨ë¶€ ë¦¬ë·° ì‘ì„± ì‹œ <strong>15ê°œ</strong> ì œê³µ</li>
                <li>ì±— ì´ìš© ì‹œ <strong>10ê°œ</strong> ì°¨ê°</li>
            </ul>
        </div>
    </div>

    <div class="content">
        {% block content %}{% endblock %}
    </div>
</body>
<script>
    function openModal() {
        document.getElementById('myModal').style.display = 'block';
    }

    function closeModal() {
        document.getElementById('myModal').style.display = 'none';
    }

    function toggleDropdown() {
        document.getElementById("profile-dropdown").classList.toggle("show");
    }

    window.onclick = function(event) {
        if (!event.target.matches('.profile-img')) {
            var dropdowns = document.getElementsByClassName("dropdown-content");
            for (var i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('show')) {
                    openDropdown.classList.remove('show');
                }
            }
        }
    }
</script>
</html>
