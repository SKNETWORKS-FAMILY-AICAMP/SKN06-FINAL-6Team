<!-- {% load static %}
{% block content %}
    <h2>리뷰 게시판</h2>
    <a href="{% url 'review_create' %}">리뷰 작성</a>
    <link rel="stylesheet" href="{% static 'css/chat.css' %}">

    <form method="GET">
        <input type="text" name="query" placeholder="메뉴 검색" value="{{ query }}">
        <button type="submit">검색</button>
    </form>

    <label for="sort">정렬:</label>
    <select id="sort" onchange="sortReviews(this.value)">
        <option value="latest" {% if sort == "latest" %}selected{% endif %}>최신순</option>
        <option value="views" {% if sort == "views" %}selected{% endif %}>조회순</option>
        <option value="rating" {% if sort == "rating" %}selected{% endif %}>별점순</option>
    </select>

    <div class="review-list">
        {% for review in reviews %}
            <div class="review-item">
                <a href="{% url 'review_detail' review.pk %}" class="menu-name">
                    {{ review.selected_menu.menu_name }}
                </a>

                <a href="{% url 'user_reviews' review.user.username %}" class="author-name">
                    {{ review.user.nickname }}
                </a>

                <div class="rating">
                    <span class="star-display">★</span>
                    <span class="rating-value">{{ review.rating }}</span>
                </div>

                <p class="review-text">
                    {{ review.review_text|truncatewords:20 }}
                </p>

                <p class="views-count">👁️ 조회수: {{ review.views }}</p>
            </div>
        {% empty %}
            <p>작성된 리뷰가 없습니다.</p>
        {% endfor %}
    </div>

    <script>
        function sortReviews(sortValue) {
            const queryParams = new URLSearchParams(window.location.search);
            queryParams.set('sort', sortValue);
            window.location.search = queryParams.toString();
        }
    </script>
{% endblock %} -->

{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/review_list.css' %}">
</head>
<body>
    <!-- <div class="container"> -->
        <h2>리뷰게시판</h2>
        <div class="logo">
            <img src="{% static 'imgs/logo.png' %}" alt="로고">
        </div>
        <div class="cookie">
            <img src="{% static 'imgs/cookie.png' %}" alt="쿠키">
        </div>
        <div class="user">
            <img src="{% static 'imgs/user.png' %}"alt="사용자">
        </div>

    <!-- 검색 & 작성 & 정렬 그룹 -->
    <div class="top-controls">
        <!-- 검색 영역 -->
        <div class="search-container">
            <input type="text" class="search-box" placeholder="메뉴명을 검색하세요.">
            <button class="search-btn">
                <img src="{% static 'imgs/search.png' %}" alt="검색 버튼">
            </button>
        </div>

        <!-- 작성 버튼 -->
        <button class="write-btn">
            <img src="{% static 'imgs/write.png' %}" alt="작성 버튼">
        </button>

        <!-- 정렬 옵션 -->
        <div class="sort-container">
            <span class="sort-option">최신순</span>
            <button class="sort-arrow">
                <img src="{% static 'imgs/under.png' %}" alt="화살표 버튼">
            </button>
            <div class="sort-dropdown">
                <span class="sort-item">최신순</span>
                <span class="sort-item">별점순</span>
                <span class="sort-item">조회순</span>
            </div>
        </div>
    </div>

    <!-- 리뷰 목록 -->
    <div class="reviews-grid">
        <div class="review-card">
            <div class="review-image">
                <img src="{% static 'imgs/user.png' %}" alt="db에 있는사진">
            </div>
            <h3 class="review-title">참치 김치찌개</h3>
            <div class="review-stars">⭐⭐⭐⭐⭐</div>
            <p class="review-user">hon***</p>
            <p class="review-views">조회수 14</p>
        </div>
    </div>
</body>
</html>